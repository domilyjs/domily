<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test</title>
</head>

<body>
  <script type="module">
    import { createDomily } from "../lib/index.esm.js";

    const testCustomElements = {
      'test-element-1': class TestElement extends HTMLElement {
        constructor() {
          super()
        }
        connectedCallback() {
          this.innerHTML = "Test Element 1"
        }
      },
      'test-element-2': class TestElement extends HTMLElement {
        constructor() {
          super()
        }
        connectedCallback() {
          this.innerHTML = "Test Element 2"
        }
      },
    }

    const Domily = createDomily(testCustomElements)
    const abortController = new AbortController()
    let count = 0
    const h1 = Domily.h1({
      text: '0',
      className: "title",
      style: {
        color: "red",
        fontSize: "50px",
        cursor: 'pointer'
      },
      events: {
        click: () => {
          count += 5;
          h1.schema.html = `<span style="font-size:${count < 40 ? count + 20 : count}px">${count}</span>`;
        },
      }
    });

    const p1 = Domily.p({
      domShow: true,
      domIf: true,
      text: "This is a paragraph.",
      className: "paragraph",
    })

    const x = {
      className: "test",
      children: [
        h1,
        p1,
        Domily['test-element-1']({
          style: {
            display: "block",
            color: "deepskyblue",
          },
        }),
        Domily['test-element-2']({
          style: {
            display: "block",
            color: "red",
          },
        }),
        Domily.ul({
          style: {
            'margin-block': '10px',
            outline: '2px dashed #f40'
          },
          children: new Array(10).fill(0).map((_, i) => Domily.li({
            text: `item-${i + 1}`
          }))
        }),
        Domily.button({
          id: 'btn-1',
          text: "button 1 - DOM Show",
          className: "button",
          events: {
            click: () => {
              p1.schema.domShow = !p1.schema.domShow;
            },
          },
        }),
        Domily.button({
          id: 'btn-2',
          text: "button 2 - DOM If",
          className: "button",
          events: {
            click: () => {
              p1.schema.domIf = !p1.schema.domIf;
            },
          },
        })
      ],
    }
    const dom = Domily.div(x);
    dom.mount();
  </script>
</body>

</html>