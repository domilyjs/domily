<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test</title>
</head>

<body>
  <script type="module">
    import { createDomily } from "../lib/index.esm.js";

    const testCustomElements = {
      'test-element-1': class TestElement extends HTMLElement {
        constructor() {
          super()
        }
        connectedCallback() {
          this.innerHTML = "Test Element 1"
        }
      },
      'test-element-2': class TestElement extends HTMLElement {
        constructor() {
          super()
        }
        connectedCallback() {
          this.innerHTML = "Test Element 1"
        }
      },
    }

    const testCustomElementTags = Object.keys(testCustomElements);

    testCustomElementTags.forEach(e => {
      customElements.define(e, testCustomElements[e])
    })

    const Domily = createDomily(testCustomElementTags)
    const abortController = new AbortController()
    let count = 0
    const h1 = Domily.h1({
      text: '0',
      className: "title",
      style: {
        color: "red",
        fontSize: "50px",
      },
      events: {
        click: () => {
          count++;
          h1.schema.html = `<span style="font-size:${count + 10}px">${count}</span>`;
        },
      }
    });

    const p1 = Domily.p({
      domShow: true,
      text: "This is a paragraph.",
      className: "paragraph",
    })

    const x = {
      className: "test",
      children: [
        h1,
        p1,
        Domily['test-element-1']({
          style: {
            display: "block",
            color: "deepskyblue",
          },
        }),
        Domily['test-element-2']({
          style: {
            display: "block",
            color: "red",
          },
        }),
        Domily.button({
          id: 'btn-1',
          text: "button 1",
          className: "button",
          events: {
            click: () => {
              p1.schema.domShow = !p1.schema.domShow;
            },
          },
        })
      ],
    }
    const dom = Domily.div(x);
    dom.mount();
  </script>
</body>

</html>
